{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucia\\\\OneDrive\\\\Desktop\\\\Transporte\\\\front\\\\src\\\\pages\\\\LoginRegister.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../styles/pages/LoginRegister.css'; // (opcional, para tus estilos)\nimport { API_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginRegister = () => {\n  _s();\n  const [isRegisterMode, setIsRegisterMode] = useState(false); // ðŸ” alterna login / registro\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [mensaje, setMensaje] = useState('');\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (isRegisterMode) {\n        // ðŸ”¹ REGISTRO\n        const res = await axios.post(`${API_URL}/auth/register`, {\n          email,\n          password,\n          nombre: email.split('@')[0]\n        }, {\n          withCredentials: true\n        });\n        setMensaje('Registro exitoso, ahora podÃ©s iniciar sesiÃ³n.');\n        setIsRegisterMode(false); // vuelve al modo login\n      } else {\n        // ðŸ”¹ LOGIN\n        const res = await axios.post(`${API_URL}/auth/login`, {\n          email,\n          password\n        }, {\n          withCredentials: true\n        });\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n        localStorage.setItem(\"username\", res.data.user.nombre);\n        window.dispatchEvent(new Event(\"storage\"));\n        navigate('/');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setMensaje('Error: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Intenta de nuevo.'));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isRegisterMode ? 'Crear cuenta' : 'Iniciar sesiÃ³n'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Correo electr\\xF3nico\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isRegisterMode ? 'Registrarse' : 'Ingresar'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"toggle-text\",\n      children: [isRegisterMode ? 'Â¿Ya tenÃ©s cuenta? ' : 'Â¿No tenÃ©s cuenta? ', /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"toggle-link\",\n        onClick: () => setIsRegisterMode(!isRegisterMode),\n        children: isRegisterMode ? 'IniciÃ¡ sesiÃ³n' : 'Registrate acÃ¡'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), mensaje && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mensaje\",\n      children: mensaje\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginRegister, \"I4AEwNFTpSp3uON8scYM11YN+TY=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginRegister;\nexport default LoginRegister;\nvar _c;\n$RefreshReg$(_c, \"LoginRegister\");","map":{"version":3,"names":["React","useState","useNavigate","axios","API_URL","jsxDEV","_jsxDEV","LoginRegister","_s","isRegisterMode","setIsRegisterMode","email","setEmail","password","setPassword","mensaje","setMensaje","navigate","handleSubmit","e","preventDefault","res","post","nombre","split","withCredentials","localStorage","setItem","data","user","window","dispatchEvent","Event","err","_err$response","_err$response$data","console","error","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","onClick","_c","$RefreshReg$"],"sources":["C:/Users/lucia/OneDrive/Desktop/Transporte/front/src/pages/LoginRegister.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../styles/pages/LoginRegister.css'; // (opcional, para tus estilos)\r\nimport { API_URL } from '../config';\r\n\r\nconst LoginRegister = () => {\r\n  const [isRegisterMode, setIsRegisterMode] = useState(false); // ðŸ” alterna login / registro\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [mensaje, setMensaje] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (isRegisterMode) {\r\n        // ðŸ”¹ REGISTRO\r\n        const res = await axios.post(`${API_URL}/auth/register`, \r\n          { email, password, nombre: email.split('@')[0] },\r\n          { withCredentials: true }\r\n        );\r\n        setMensaje('Registro exitoso, ahora podÃ©s iniciar sesiÃ³n.');\r\n        setIsRegisterMode(false); // vuelve al modo login\r\n      } else {\r\n        // ðŸ”¹ LOGIN\r\n        const res = await axios.post(`${API_URL}/auth/login`, \r\n          { email, password },\r\n          { withCredentials: true }\r\n        );\r\n        localStorage.setItem(\"isLoggedIn\", \"true\");\r\n        localStorage.setItem(\"username\", res.data.user.nombre);\r\n        window.dispatchEvent(new Event(\"storage\"));\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMensaje('Error: ' + (err.response?.data?.error || 'Intenta de nuevo.'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2>{isRegisterMode ? 'Crear cuenta' : 'Iniciar sesiÃ³n'}</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Correo electrÃ³nico\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"ContraseÃ±a\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button type=\"submit\">\r\n          {isRegisterMode ? 'Registrarse' : 'Ingresar'}\r\n        </button>\r\n      </form>\r\n\r\n      <p className=\"toggle-text\">\r\n        {isRegisterMode\r\n          ? 'Â¿Ya tenÃ©s cuenta? '\r\n          : 'Â¿No tenÃ©s cuenta? '}\r\n        <span\r\n          className=\"toggle-link\"\r\n          onClick={() => setIsRegisterMode(!isRegisterMode)}\r\n        >\r\n          {isRegisterMode ? 'IniciÃ¡ sesiÃ³n' : 'Registrate acÃ¡'}\r\n        </span>\r\n      </p>\r\n\r\n      {mensaje && <p className=\"mensaje\">{mensaje}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginRegister;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}